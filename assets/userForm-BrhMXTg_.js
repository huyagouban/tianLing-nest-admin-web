import{W as d,g as j,r as f,R as A,o as p,h as V,x as e,y as l,s as L,t as g,k as r,a5 as w,a6 as F,a7 as v,J as M,ad as T,ae as I,a1 as z,N as G,Q as J}from"./index-CpodFpUQ.js";import{E as P}from"./el-dialog-BdRR_6YM.js";import{a as Q,E as W}from"./el-form-item-CvcOi-Xh.js";import{E as H}from"./el-row-D5xM9lwf.js";import{E as K,a as X}from"./el-radio-BM65Nv2y.js";import{E as Y,a as Z}from"./el-select-B4_7IAkN.js";import{E as ee}from"./el-col-57__bE4T.js";function le(s){return d({url:"/user",method:"post",data:s})}function _e(s){return d({url:"/user/list",method:"get",params:s})}function ce(s){return d({url:`/user/info/${s}`,method:"get"})}function oe(s){return d({url:`/user/update/${s.userId}`,method:"put",data:s})}function ge(s){return d({url:`/user/${s}`,method:"delete"})}function be(s){return d({url:"/user/excel/download",method:"get",params:s})}function ae(){return d({url:"role/selectRole",method:"get"})}const te={class:"dialog-footer"},re=j({__name:"userForm",props:{dialogVisible:{type:Boolean,default:!1},title:{default:""},id:{default:null},userForm:{default:()=>({})}},emits:["emitAddFormBtn"],setup(s,{emit:y}){const h=y,b=f(),R=f([{value:"0",label:"女"},{value:"1",label:"男"}]),E=f(),i=s,a=f({status:"1"}),B=f({userName:[{required:!0,message:"用户名称不能为空",trigger:"blur"},{min:2,max:20,message:"用户名称长度必须介于 2 和 20 之间",trigger:"blur"}],nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],password:[{required:!0,message:"用户密码不能为空",trigger:"blur"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"},{pattern:/^[^<>"'|\\]+$/,message:`不能包含非法字符：< > " ' \\ |`,trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],phoneNumber:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}),C=()=>{b.value.validate(c=>{c&&T("是否确认提交？").then(()=>{a.value.userId?oe(a.value).then(t=>{I(t.message),_()}):le(a.value).then(t=>{I(t.message),_()})})})},_=()=>{b.value.resetFields(),h("emitAddFormBtn",!1)},O=()=>{ae().then(c=>{E.value=c.data})};return A(()=>{O(),i.userForm.userId&&(a.value=i.userForm)}),(c,t)=>{const m=z,u=Q,n=ee,N=Y,k=Z,x=K,S=X,$=H,D=W,U=G,q=P;return p(),V("div",null,[e(q,{"model-value":i.dialogVisible,title:i.title,width:"680px","before-close":_,"destroy-on-close":""},{footer:l(()=>[L("div",te,[e(U,{type:"primary",onClick:C},{default:l(()=>[g(" 确定 ")]),_:1}),e(U,{onClick:_},{default:l(()=>[g("取消")]),_:1})])]),default:l(()=>[e(D,{model:r(a),ref_key:"formRef",ref:b,"label-width":"100px",rules:r(B)},{default:l(()=>[e($,null,{default:l(()=>[e(n,{span:12},{default:l(()=>[e(u,{label:"用户昵称",prop:"nickName"},{default:l(()=>[e(m,{modelValue:r(a).nickName,"onUpdate:modelValue":t[0]||(t[0]=o=>r(a).nickName=o),placeholder:"请输入用户昵称"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(u,{label:"手机号码",prop:"phoneNumber"},{default:l(()=>[e(m,{modelValue:r(a).phoneNumber,"onUpdate:modelValue":t[1]||(t[1]=o=>r(a).phoneNumber=o),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(u,{label:"邮箱地址",prop:"email"},{default:l(()=>[e(m,{modelValue:r(a).email,"onUpdate:modelValue":t[2]||(t[2]=o=>r(a).email=o),placeholder:"请输入邮箱地址"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(u,{label:"用户性别",prop:"sex"},{default:l(()=>[e(k,{modelValue:r(a).sex,"onUpdate:modelValue":t[3]||(t[3]=o=>r(a).sex=o),placeholder:"请选择用户性别"},{default:l(()=>[(p(!0),V(w,null,F(r(R),o=>(p(),v(N,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(u,{label:"用户名称",prop:"userName"},{default:l(()=>[e(m,{modelValue:r(a).userName,"onUpdate:modelValue":t[4]||(t[4]=o=>r(a).userName=o),placeholder:"请输入用户名称"},null,8,["modelValue"])]),_:1})]),_:1}),i.userForm.userId?M("",!0):(p(),v(n,{key:0,span:12},{default:l(()=>[e(u,{label:"用户密码",prop:"password"},{default:l(()=>[e(m,{modelValue:r(a).password,"onUpdate:modelValue":t[5]||(t[5]=o=>r(a).password=o),placeholder:"请输入用户密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1})),e(n,{span:12},{default:l(()=>[e(u,{label:"用户角色",prop:"roleIds"},{default:l(()=>[e(k,{modelValue:r(a).roleIds,"onUpdate:modelValue":t[6]||(t[6]=o=>r(a).roleIds=o),placeholder:"请选择用户角色"},{default:l(()=>[(p(!0),V(w,null,F(r(E),o=>(p(),v(N,{key:o.roleId,label:o.roleName,value:o.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:l(()=>[e(u,{label:"用户状态",prop:"status"},{default:l(()=>[e(S,{modelValue:r(a).status,"onUpdate:modelValue":t[7]||(t[7]=o=>r(a).status=o)},{default:l(()=>[e(x,{value:"1"},{default:l(()=>[g("正常")]),_:1}),e(x,{value:"0"},{default:l(()=>[g("停用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(u,{label:"备注",prop:"remark"},{default:l(()=>[e(m,{modelValue:r(a).remark,"onUpdate:modelValue":t[8]||(t[8]=o=>r(a).remark=o),placeholder:"请输入备注",type:"textarea",rows:"4"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value","title"])])}}}),se=J(re,[["__scopeId","data-v-b213f87e"]]),Ve=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"}));export{oe as a,_e as b,be as c,ge as d,Ve as e,ce as g,se as u};
