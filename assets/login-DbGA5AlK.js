import{W as S,g as E,r as c,R as C,h as F,x as e,k as o,s as d,y as a,X as R,O as z,P as B,V as M,o as U,Y as q,Z as K,$ as L,A as b,t as T,a0 as $,a1 as j,N as H,Q as W}from"./index-gd7kCRgy.js";import{E as X,a as Y}from"./el-form-item-B0DA7TzJ.js";import{E as A}from"./el-row-DY6bVN-5.js";import{E as O}from"./el-checkbox-B9dyNmaT.js";import{E as P}from"./el-col-MJgKtEjJ.js";import"./_baseClone-DdFIvI3H.js";import"./isEqual-DUkHDidl.js";const Q={number:{value:60,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:4,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:100,rotateY:1200}}},Z={detect_on:"Window",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:140,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},D=!0,G={particles:Q,interactivity:Z,retina_detect:D};function J(){return S({url:"auth/captcha",method:"get"})}const h=i=>(z("data-v-a74d46c8"),i=i(),B(),i),ee={class:"particles-js-box"},te={class:"login-container"},oe=h(()=>d("h1",null,"天凌后台管理系统",-1)),ae=h(()=>d("p",null,"基于Nest&Vue后台管理系统",-1)),se=["innerHTML"],le=E({__name:"login",setup(i){const w=M(),t=c({userName:"",password:"",code:"",remember:!1}),g=c(),y=c({userName:[{required:!0,message:"用户名称不能为空",trigger:"blur"},{min:2,max:20,message:"用户名称长度必须介于 2 和 20 之间",trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}],password:[{required:!0,message:"用户密码不能为空",trigger:"blur"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"},{pattern:/^[^<>"'|\\]+$/,message:`不能包含非法字符：< > " ' \\ |`,trigger:"blur"}]}),v=c(),p=()=>{J().then(u=>{v.value=u.data})},m=()=>{g.value.validate(u=>{u&&(t.value.remember?(localStorage.setItem("userName",t.value.userName),localStorage.setItem("password",t.value.password)):(localStorage.removeItem("userName"),localStorage.removeItem("password")),$(t.value).then(s=>{if(s.status==200){let _=s.data.access_token;localStorage.setItem("token",_),w.push({path:"/"})}else p()}))})},x=()=>{localStorage.getItem("userName")&&(t.value.userName=localStorage.getItem("userName")),localStorage.getItem("password")&&(t.value.password=localStorage.getItem("password"))};return C(()=>{x(),p()}),(u,s)=>{const _=R("vue-particles"),f=j,r=Y,n=P,k=O,V=H,N=A,I=X;return U(),F("div",ee,[e(_,{id:"particles-js",options:o(G)},null,8,["options"]),d("div",te,[oe,ae,e(I,{model:o(t),ref_key:"loginFormRef",ref:g,rules:o(y),style:{"max-width":"600px"}},{default:a(()=>[e(N,{gutter:20},{default:a(()=>[e(n,{span:24},{default:a(()=>[e(r,{prop:"userName"},{default:a(()=>[e(f,{"prefix-icon":o(q),modelValue:o(t).userName,"onUpdate:modelValue":s[0]||(s[0]=l=>o(t).userName=l),placeholder:"请输入账号"},null,8,["prefix-icon","modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:a(()=>[e(r,{prop:"password"},{default:a(()=>[e(f,{"prefix-icon":o(K),modelValue:o(t).password,"onUpdate:modelValue":s[1]||(s[1]=l=>o(t).password=l),placeholder:"请输入密码","show-password":""},null,8,["prefix-icon","modelValue"])]),_:1})]),_:1}),e(n,{span:14},{default:a(()=>[e(r,{prop:"code"},{default:a(()=>[e(f,{"prefix-icon":o(L),onKeyup:b(m,["enter","native"]),modelValue:o(t).code,"onUpdate:modelValue":s[2]||(s[2]=l=>o(t).code=l),placeholder:"请输入验证码"},null,8,["prefix-icon","modelValue"])]),_:1})]),_:1}),e(n,{span:10},{default:a(()=>[e(r,null,{default:a(()=>[d("div",{class:"captchaSvg",onClick:p,innerHTML:o(v)},null,8,se)]),_:1})]),_:1}),e(n,{span:24},{default:a(()=>[e(r,{prop:"remember"},{default:a(()=>[e(k,{modelValue:o(t).remember,"onUpdate:modelValue":s[3]||(s[3]=l=>o(t).remember=l),onKeyup:b(m,["enter","native"]),label:"记住密码"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:a(()=>[e(r,{style:{width:"100%"}},{default:a(()=>[e(V,{style:{width:"100%"},type:"primary",onClick:m},{default:a(()=>[T("登录")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}}),me=W(le,[["__scopeId","data-v-a74d46c8"]]);export{me as default};
