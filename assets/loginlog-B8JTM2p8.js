import{W as h,g as H,V as J,r as p,R as K,a4 as X,o as s,h as k,x as e,y as o,k as t,a5 as Y,a6 as Z,a7 as _,a8 as ee,t as c,D as f,aa as P,ab as oe,v as V,af as te,ad as E,ae as F,a1 as ae,N as le}from"./index-CpodFpUQ.js";import{v as ne}from"./el-loading-BOfnPg9C.js";import{E as ie,a as re}from"./el-table-column-CD1Eg5LV.js";import"./el-checkbox-gOJjs20a.js";import{_ as se}from"./dictData.vue_vue_type_script_setup_true_lang-DoQPVKV8.js";import{E as ce}from"./el-card-q23y_vI7.js";import{E as de}from"./el-row-D5xM9lwf.js";import{E as ue}from"./el-col-57__bE4T.js";import{a as pe,E as me}from"./el-form-item-CvcOi-Xh.js";import{E as ge,a as _e}from"./el-select-B4_7IAkN.js";import{p as fe,d as he}from"./index-DgcNhbwt.js";import{_ as we}from"./pagination.vue_vue_type_script_setup_true_lang-CFSpbPsp.js";import{u as ve}from"./dict-BF9NBz1l.js";import"./debounce-DB3PlMcl.js";import"./_baseClone-Bd2QEoHD.js";import"./isEqual-DA5FAILj.js";import"./token-DI9FKtlJ.js";import"./strings-tw-UTuVM.js";import"./data-dQwJxLXj.js";function be(d){return h({url:"/login-log/list",method:"get",params:d})}function Le(d){return h({url:`login-log/delete/${d}`,method:"delete"})}function Ee(d){return h({url:"login-log/excel/download",method:"get",params:d})}function ye(){return h({url:"login-log/clear",method:"delete"})}const qe=H({__name:"loginlog",setup(d){J();const{monitor_loginLog_status:y}=ve("monitor_loginLog_status"),u=p([]),C=p(),w=p(!1),n=p({currentPage:1,pageSize:10}),S=p(0),m=()=>{n.value.currentPage=1,v()},z=()=>{C.value.resetFields(),m()},D=p([]),N=a=>{u.value=a.map(r=>r.loginId)},I=()=>{if(u.value.length==0){te("请选择要删除的数据");return}E("是否确认删除？").then(()=>{Le(u.value.toString()).then(a=>{F(a.message),m()})})},T=()=>{E("是否确认清空？").then(()=>{ye().then(a=>{F(a.message),m()})})},v=()=>{w.value=!0,be(n.value).then(a=>{D.value=a.data.list,S.value=a.data.total,w.value=!1})},R=a=>{n.value.pageSize=a,m()},B=a=>{n.value.currentPage=a,v()},$=()=>{E("是否确认导出？").then(()=>{let a={loginLogIds:u.value?u.value.toString():""};Ee(a).then(r=>{he(r.data.data,"登录日志")})})};return K(()=>{v()}),(a,r)=>{const O=ae,b=pe,M=ge,U=_e,g=le,j=me,q=ue,Q=de,x=ce,i=ie,W=se,A=re,L=X("hasPermi"),G=ne;return s(),k("div",null,[e(x,null,{default:o(()=>[e(j,{model:t(n),ref_key:"seachFormRef",ref:C,"label-width":"auto",inline:!0},{default:o(()=>[e(b,{label:"用户名称",prop:"loginName"},{default:o(()=>[e(O,{class:"w200",modelValue:t(n).loginName,"onUpdate:modelValue":r[0]||(r[0]=l=>t(n).loginName=l),placeholder:"请输入用户名称"},null,8,["modelValue"])]),_:1}),e(b,{label:"登录状态",prop:"loginStatus"},{default:o(()=>[e(U,{class:"w200",modelValue:t(n).loginStatus,"onUpdate:modelValue":r[1]||(r[1]=l=>t(n).loginStatus=l),placeholder:"请选择登录状态",style:{width:"240px"}},{default:o(()=>[(s(!0),k(Y,null,Z(t(y),l=>(s(),_(M,{key:l.dictDataId,label:l.dictDataLabel,value:l.dictDataValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:o(()=>[e(g,{type:"primary",icon:t(ee),onClick:m},{default:o(()=>[c("搜索")]),_:1},8,["icon"]),e(g,{onClick:z},{default:o(()=>[c("重置")]),_:1})]),_:1})]),_:1},8,["model"]),e(Q,{justify:"end"},{default:o(()=>[e(q,{span:24},{default:o(()=>[f((s(),_(g,{type:"danger",plain:"",icon:t(P),disabled:!(t(u).length>0),onClick:I},{default:o(()=>[c("批量删除")]),_:1},8,["icon","disabled"])),[[L,["monitor_loginLog_delete"]]]),f((s(),_(g,{type:"danger",plain:"",icon:t(P),onClick:T},{default:o(()=>[c("清空")]),_:1},8,["icon"])),[[L,["monitor_loginLog_clear"]]]),f((s(),_(g,{icon:t(oe),plain:"",type:"warning",onClick:$},{default:o(()=>[c("导出")]),_:1},8,["icon"])),[[L,["monitor_loginLog_export"]]])]),_:1})]),_:1})]),_:1}),e(x,null,{default:o(()=>[f((s(),_(A,{data:t(D),style:{width:"100%"},border:"","empty-text":"暂无数据",onSelectionChange:N},{default:o(()=>[e(i,{type:"selection",width:"50"}),e(i,{type:"index",align:"center",width:"60",label:"序号"},{default:o(l=>[c(V(l.$index+1),1)]),_:1}),e(i,{prop:"loginName","header-align":"center","show-overflow-tooltip":"","min-width":"90",label:"用户名称"}),e(i,{prop:"loginIp","header-align":"center","show-overflow-tooltip":"","min-width":"90",label:"登录地址"}),e(i,{prop:"loginLocation",align:"center",width:"90",label:"登陆地点"}),e(i,{prop:"browser",align:"center","show-overflow-tooltip":"","min-width":"80",label:"浏览器"}),e(i,{prop:"os",align:"center","show-overflow-tooltip":"","min-width":"90",label:"操作系统"}),e(i,{prop:"loginStatus",align:"center","show-overflow-tooltip":"","min-width":"90",label:"登录状态"},{default:o(l=>[e(W,{dictDataOption:t(y),operType:l.row.loginStatus},null,8,["dictDataOption","operType"])]),_:1}),e(i,{prop:"loginMessage","header-align":"center","show-overflow-tooltip":"","min-width":"90",label:"操作信息"}),e(i,{prop:"updateDate",align:"center",width:"180",label:"登录时间"},{default:o(l=>[c(V(t(fe)(l.row.updateDate)),1)]),_:1})]),_:1},8,["data"])),[[G,t(w)]]),e(we,{currentPage:t(n).currentPage,pageSize:t(n).pageSize,total:t(S),onPaginationSizeChange:R,onPaginationCurrentChange:B},null,8,["currentPage","pageSize","total"])]),_:1})])}}});export{qe as default};
