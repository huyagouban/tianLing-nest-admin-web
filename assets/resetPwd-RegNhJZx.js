import{g as x,r as n,T as E,V as q,w as T,o as k,h as y,x as o,y as a,k as r,t as f,ad as C,ae as F,bf as m,a1 as R,N as B,Q as I}from"./index-gd7kCRgy.js";import{a as N,E as U}from"./el-form-item-B0DA7TzJ.js";import{u as z}from"./profile-lXo-4NDc.js";import"./_baseClone-DdFIvI3H.js";const L=x({__name:"resetPwd",props:{user:{default:()=>({})}},setup(c){const p=n(),i=E(),g=q(),_=n({path:i.path,name:i.meta.title}),P=c,s=n({}),V=n({oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"用户密码不能为空",trigger:"blur"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"},{pattern:/^[^<>"'|\\]+$/,message:`不能包含非法字符：< > " ' \\ |`,trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:(l,e,t)=>{s.value.newPassword!==e?t(new Error("两次输入的密码不一致")):t()},trigger:"blur"}]}),h=()=>{p.value.validate(l=>{l&&C("是否确认提交？").then(()=>{z(s.value).then(e=>{F(e.message)})})})},b=()=>{m().closeTagsViews(_.value),g.push({path:m().tagsviewsList[m().tagsviewsList.length-1].path})};return T(()=>P.user,(l,e)=>{s.value=l}),(l,e)=>{const t=R,d=N,w=B,v=U;return k(),y("div",null,[o(v,{model:r(s),ref_key:"formRef",ref:p,"label-width":"100px",rules:r(V)},{default:a(()=>[o(d,{label:"旧密码:",prop:"password"},{default:a(()=>[o(t,{modelValue:r(s).oldPassword,"onUpdate:modelValue":e[0]||(e[0]=u=>r(s).oldPassword=u),placeholder:"请输入旧密码","show-password":""},null,8,["modelValue"])]),_:1}),o(d,{label:"新密码:",prop:"newPassword"},{default:a(()=>[o(t,{modelValue:r(s).newPassword,"onUpdate:modelValue":e[1]||(e[1]=u=>r(s).newPassword=u),placeholder:"请输入新密码","show-password":""},null,8,["modelValue"])]),_:1}),o(d,{label:"确认密码:",prop:"confirmPassword"},{default:a(()=>[o(t,{modelValue:r(s).confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=u=>r(s).confirmPassword=u),placeholder:"两次密码需一致","show-password":""},null,8,["modelValue"])]),_:1}),o(d,null,{default:a(()=>[o(w,{type:"primary",size:"small",onClick:h},{default:a(()=>[f(" 确定 ")]),_:1}),o(w,{type:"danger",size:"small",onClick:b},{default:a(()=>[f("关闭")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}}),A=I(L,[["__scopeId","data-v-607213c5"]]);export{A as default};
